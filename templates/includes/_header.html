{% load static %}


<header class="bg-darker">
  <nav class="navbar navbar-expand-md navbar-dark container">
    <!-- Hamburger menu (mobile only, on left) -->
    <button class="navbar-toggler me-2 d-md-none" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <a href="{% url 'homepage' %}" class="navbar-brand d-flex align-items-center logo me-md-0">
      <img src="{% static 'images/logo.png' %}" alt="Lutris" width="42" height="42" />
      <span class="d-none d-sm-inline">Lutris</span>
    </a>

    <!-- Collapsible nav links -->
    <div class="collapse navbar-collapse order-last order-md-0" id="navbarContent">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" href="{% url 'downloads' %}">Download</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'game_list' %}">Games</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'about' %}">About</a></li>
        <li class="nav-item"><a class="nav-link" href="{{ DISCORD_URL }}" target="_blank">Discord</a></li>
        <li class="nav-item"><a class="nav-link" href="https://forums.lutris.net">Forums</a></li>
        <li class="nav-item"><a class="nav-link" href="{% url 'donate' %}">Donate</a></li>
      </ul>
    </div>

    <!-- Always visible: search + user menu -->
    <div class="d-flex align-items-center gap-2 ms-auto">
      <form action="{% url 'game_list' %}" method="get" class="header-search">
        <input type="search" class="form-control form-control-sm" name="q" id="global-search" placeholder="Search...">
      </form>
      {% if user.is_authenticated %}
        <div class="dropdown">
          <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle user-dropdown" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
            <img src="{{user.avatar_url}}" title="{{user.username}}" class="rounded-circle" width="32" height="32">
          </a>
          <ul class="dropdown-menu dropdown-menu-dark dropdown-menu-end" aria-labelledby="dropdownUser1">
            <li><a class="dropdown-item" href="{% url 'user_account' user.username %}">Profile</a></li>
            <li><a class="dropdown-item" href="{% url 'library_list' username=user.username %}">My Library</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="{% url 'logout' %}">Sign out</a></li>
          </ul>
        </div>
      {% else %}
        <a class="btn btn-sm btn-primary" href="{% url 'login' %}?next={{ request.get_full_path }}">Log in</a>
        <a class="btn btn-sm btn-secondary d-none d-md-inline-block" href="{% url 'register' %}">Register</a>
      {% endif %}
    </div>
  </nav>
</header>